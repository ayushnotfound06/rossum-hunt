<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QR Challenge - Question 4</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h2>QR Challenge - Question 4</h2>
    <form id="teamAuthForm">
      <input type="text" id="teamCode" placeholder="Enter your team code" required />
      <button type="submit">Start</button>
    </form>

    <div id="questionBox" style="display: none;">
      <p><strong>Question:</strong> What is the square root of 144?</p>
      <input type="text" id="answer" placeholder="Enter your answer" />
      <button onclick="submitAnswer()">Submit Answer</button>
    </div>
  </div>

  <script>
    let currentTeamCode = null;
    const IPV4 = "http://172.16.45.140:3000/"

    document.getElementById("teamAuthForm").onsubmit = function (e) {
      e.preventDefault();
      currentTeamCode = document.getElementById("teamCode").value.trim();
      document.getElementById("teamAuthForm").style.display = "none";
      document.getElementById("questionBox").style.display = "block";
    };

    function submitAnswer() {
      const answer = document.getElementById("answer").value.trim();
      if (answer === "12") {
        fetch(IPV4 + "update", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ teamCode: currentTeamCode, points: 10, letter: "S" })
        })
        .then(() => {
          alert("Correct! Redirecting to dashboard...");
          localStorage.setItem("teamCode", currentTeamCode);
          window.location.href = "index.html";
        });
      } else {
        alert("Wrong answer. Try again.");
      }
    }
  </script>
</body>
</html>
